#-------------------------------------------------------------------------------
INCLUDE( ${PROJECT_SOURCE_DIR}/cmake/utils.cmake )

#-------------------------------------------------------------------------------
# Include all the search paths for headers
INCLUDE_DIRECTORIES(
    .
    ${global_include_dirs} )

LINK_DIRECTORIES(  
    ${global_link_dirs} )

SET( srcFiles 
    main.cpp )

# This 'cmake_policy' line stops a warning generated by 'TARGET_LINK_LIBRARIES'
# below. Comment it out to see the warning
if(COMMAND cmake_policy)
    cmake_policy(SET CMP0003 NEW)
endif(COMMAND cmake_policy)

ADD_EXECUTABLE( roboardcontrol ${srcFiles} )
SET_TARGET_PROPERTIES( roboardcontrol PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR} )

LIST_TO_STRING( ROBOARDCONTROL_CFLAGS "${global_cflags}" )

SET_SOURCE_FILES_PROPERTIES( ${global_sources} 
    PROPERTIES COMPILE_FLAGS "${ROBOARDCONTROL_CFLAGS} ${CMAKE_C_FLAGS_${CMAKE_BUILD_TYPE}}" )

ADD_SUBDIRECTORY( ColourTracker )
ADD_SUBDIRECTORY( PythonInterface )
ADD_SUBDIRECTORY( UweSubPlugin )

IF ( CMAKE_LINK_FLAGS_${CMAKE_BUILD_TYPE} )
  SET_SOURCE_FILES_PROPERTIES(${global_sources} PROPERTIES LINK_FLAGS 
    ${CMAKE_LINK_FLAGS_${CMAKE_BUILD_TYPE}})
ENDIF ( CMAKE_LINK_FLAGS_${CMAKE_BUILD_TYPE} )

TARGET_LINK_LIBRARIES( roboardcontrol
    ${global_link_libs} playerinterface playerwkb playercommon jpeg playerjpeg )


